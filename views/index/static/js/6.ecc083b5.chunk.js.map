{"version":3,"sources":["views/Register/RegisterForm.js","views/Register/Register.js","views/Register/index.js"],"names":["FormItem","es_form","Item","LoginForm","state","loginLoading","handleSubmit","e","preventDefault","_this","props","form","validateFields","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","err","formData","resp","wrap","_context","prev","next","setState","http","post","sent","success","history","push","data","user","id","stop","this","_x","_x2","apply","arguments","compareToFirstPassword","rule","value","callback","getFieldValue","getFieldDecorator","_react_16_7_0_react_default","createElement","onSubmit","className","rules","required","message","max","validator","test","Error","input","size","prefix","icon","type","style","color","placeholder","es_button","loading","htmlType","textAlign","Link","to","Component","LoginFormRouter","withRouter","EnhancedForm","create","RegisterForm","Login","src","width","React","Register"],"mappings":"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","file":"static/js/6.ecc083b5.chunk.js","sourcesContent":["/* global http */\nimport React, { Component } from 'react';\nimport {\n  Form, Icon, Input, Button, message\n} from 'antd';\nimport { withRouter, Link } from 'react-router-dom';\nconst FormItem = Form.Item;\nclass LoginForm extends Component {\n  state = {\n    loginLoading: false\n  }\n  handleSubmit = (e) => {\n    e.preventDefault();\n    this.props.form.validateFields(async(err, formData) => {\n      if (!err) {\n        this.setState({\n          loginLoading: true\n        });\n        const resp = await http.post('/api/register', formData, false);\n        this.setState({\n          loginLoading: false\n        });\n        if (resp.success) {\n          // message.success('注册成功，正在跳转到登录页面...', 1);\n          this.props.history.push('/regres/' + resp.data.user.id);\n        }\n      }\n    });\n  }\n  compareToFirstPassword = (rule, value, callback) => {\n    const form = this.props.form;\n    if (value && value !== form.getFieldValue('password')) {\n      callback('两次输入的密码不一致，请重新输入'); // eslint-disable-line\n    } else {\n      callback();\n    }\n  }\n  render() {\n    const { getFieldDecorator } = this.props.form;\n    const usernameRule = (rule, value, callback) => {\n      let reg = /^[a-zA-Z]+[a-z0-9A-Z]*$/g;\n      if (reg.test(value)) {\n        callback();\n      } else {\n        callback(new Error('只能输入字母开头的字母或数字'));\n      }\n    };\n    return (\n      <Form onSubmit={this.handleSubmit} className=\"login-form\">\n        <FormItem>\n          {getFieldDecorator('username', {\n            rules: [\n              { required: true, message: '请输入登录账号!' },\n              { max: 20, message: '用户名不能超过20个字符!' },\n              { validator: usernameRule, message: '只能输入字母开头的字母或数字' }\n            ]\n          })(\n            <Input size=\"large\" prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"用户名（字母开头的字母或数字组合）\" />\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('email', {\n            rules: [\n              { required: true, message: '请输入邮箱!' },\n              { type: 'email', message: '请输入正确格式的邮箱' }]\n          })(\n            <Input size=\"large\" prefix={<Icon type=\"folder\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"邮箱（用于激活账号和找回密码）\" />\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('nickname', {\n            rules: [\n              { required: true, message: '请输入昵称!' },\n              { max: 20, message: '昵称不能超过20个字符!' }\n            ]\n          })(\n            <Input size=\"large\" prefix={<Icon type=\"user\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"昵称（在本站的称呼）\" />\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('password', {\n            rules: [{ required: true, message: '请输入密码!' }]\n          })(\n            <Input size=\"large\" prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"密码\" />\n          )}\n        </FormItem>\n        <FormItem>\n          {getFieldDecorator('repassword', {\n            rules: [{ required: true, message: '请再次输入密码确认!' }, { validator: this.compareToFirstPassword }]\n          })(\n            <Input size=\"large\" prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"重复密码\" />\n          )}\n        </FormItem>\n        <FormItem>\n          <Button size=\"large\" loading={this.state.loginLoading} type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\n            提  交\n          </Button>\n          <div style={{ textAlign: 'center' }}><Link className=\"login-link\" to=\"/\">已经有账号？返回登录</Link></div>\n        </FormItem>\n      </Form>\n    );\n  }\n}\nconst LoginFormRouter = withRouter(LoginForm);\nexport default LoginFormRouter;\n","import React from 'react';\nimport RegisterForm from './RegisterForm';\nimport '../Login/Login.scss';\nimport { Form } from 'antd';\nimport { withRouter } from 'react-router-dom';\nlet EnhancedForm = Form.create()(RegisterForm);\nclass Login extends React.Component {\n  componentDidMount() {\n    // console.log(this.props.query);\n  }\n  render() {\n    return (\n      <div className=\"login-body\">\n        <div className=\"login\">\n          <div className=\"inset animated customClipX\">\n            <div className=\"login-logo\">\n              <img src=\"/assets/images/logo-blue.png\" width=\"396\"></img>\n            </div>\n            <h2 className=\"login-title\">用户注册</h2>\n            <EnhancedForm></EnhancedForm>\n          </div>\n        </div>\n        <div className=\"login-footer\">\n          <p>&copy; All rights reserved FastMock在线Mock平台</p>\n          <p className=\"beian\">渝ICP备19000613号-2</p>\n        </div>\n      </div>\n    );\n  }\n};\nexport default withRouter(Login);\n","import Register from './Register';\nexport default Register;\n"],"sourceRoot":""}